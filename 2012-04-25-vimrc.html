<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>我的vimrc | Hm&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="系统：windows 7  vim版本:7.4">
<meta property="og:type" content="article">
<meta property="og:title" content="我的vimrc">
<meta property="og:url" content="http://huangming.github.io/2012-04-25-vimrc.html">
<meta property="og:site_name" content="Hm's Blog">
<meta property="og:description" content="系统：windows 7  vim版本:7.4">
<meta property="og:updated_time" content="2015-07-31T06:58:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我的vimrc">
<meta name="twitter:description" content="系统：windows 7  vim版本:7.4">
<meta name="twitter:creator" content="@hmorz">
  
    <link rel="alternative" href="/atom.xml" title="Hm&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"> -->
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link href="/css/font-quigleywiggly.css" rel="Stylesheet" type="text/css" />
  <link href="/css/highlight/styles/default.css" rel="Stylesheet" type="text/css" />
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="/css/highlight/highlight.pack.js" type="text/javascript"></script>
  <script src="/js/jquery-1.4.2.min.js" type="text/javascript"></script>
  <script src="/js/girls.js" type="text/javascript"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script type="text/javascript" charset="utf-8" src="/js/weather.js"></script> 
  <link href="http://huangming.github.io/stylesheets/main.css" rel="stylesheet" media="all"/>
  <link href="http://huangming.github.io/images/weather/default/julying-weather.css" rel="stylesheet" media="all"/>
  <!-- 
 -->
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hm&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I am here</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/vimwiki">Wiki</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://huangming.github.io"></form>
        </div>
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-vimrc" class="article article-type-post" itemscope itemprop="blogPost">
  <!-- <div class="article-meta"> -->
  <!--   <a href="/2012-04-25-vimrc.html" class="article-date">
  <time datetime="2012-04-25T08:54:00.000Z" itemprop="datePublished">2012-04-25</time>
</a> -->
  <!--   
  <div class="article-category">
    <a class="article-category-link" href="/categories/Vim/">Vim</a>
  </div>
 -->
  <!-- </div> -->
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      我的vimrc
    </h1>
  

        <div class="article-meta">
          <a href="/2012-04-25-vimrc.html" class="article-date">
  <time datetime="2012-04-25T08:54:00.000Z" itemprop="datePublished">2012-04-25</time>
</a>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/Vim/">Vim</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> 系统：windows 7  vim版本:7.4<a id="more"></a><br><pre><code>"===========================================================================
"         Filename: vimrc
"           Author: HM
"            Email: wangbandi#gmail.com
"         Homepage: http://huangming.github.io
"          Created: 2015.03.30
"===========================================================================


"                      _________________________
"
"                               Plugin
"                      _________________________
"
"---------------------------------------------------------------------------
" => Vundle
"---------------------------------------------------------------------------
set nocompatible              " be iMproved, required
filetype off                  " required

" set the runtime path to include Vundle and initialize
set rtp+=~/vimfiles/bundle/Vundle.vim
" alternatively, pass a path where Vundle should install plugins
call vundle#begin('~/vimfiles/bundle')

" let Vundle manage Vundle, required
Plugin 'gmarik/Vundle.vim'

" Plugin 'Shougo/vimproc'
" Plugin 'Shougo/vimshell.vim'

Plugin 'bufexplorer.zip'
let g:bufExplorerSplitBelow=1 
Plugin 'scrooloose/nerdtree'
Plugin 'jistr/vim-nerdtree-tabs'
if executable('ctags')
    Plugin 'majutsushi/tagbar'
endif
if executable('git')
    Plugin 'tpope/vim-fugitive'
endif
Plugin 'tpope/vim-surround'
Plugin 'tpope/vim-unimpaired'
Plugin 'Align'
Plugin 'tpope/vim-commentary'
autocmd FileType vim set commentstring=\"\ %s
autocmd FileType vbnet set commentstring=\'\ %s
Plugin 'vim-scripts/VisIncr'
Plugin 'drmingdrmer/xptemplate'
Plugin 'Shougo/neocomplcache.vim'

Plugin 'calendar.vim'
Plugin 'Stormherz/tablify'
Plugin 'vimwiki'
Plugin 'yianwillis/vimcdoc'
Plugin 'huangming/myvimplugin'

Plugin 'VOoM'
" Plugin 'vim-scripts/txt.vim--xu'
Plugin 'ap/vim-css-color'
Plugin 'nathanaelkane/vim-indent-guides'
  let g:indent_guides_enable_on_vim_startup = 1
Plugin 'michaeljsmith/vim-indent-object'
  let g:indentobject_meaningful_indentation = ["haml", "sass", "python", "yaml", "markdown", "vbnet"]

Plugin 'scrooloose/syntastic'
" let g:syntastic_python_checkers = ['pylint']
let g:syntastic_python_checkers = ['python']
let g:syntastic_enable_python_checker = 1
set statusline+=%#warningmsg#
set statusline+=%{SyntasticStatuslineFlag()}
set statusline+=%*
let g:syntastic_always_populate_loc_list = 1
let g:syntastic_auto_loc_list = 1
let g:syntastic_check_on_open = 1
let g:syntastic_check_on_wq = 0

if has('gui_running')
    Plugin 'Lokaltog/vim-powerline'
endif
Plugin 'Color-Scheme-Explorer'
Plugin 'baskerville/bubblegum'
Plugin 'altercation/vim-colors-solarized'
Plugin 'chriskempson/vim-tomorrow-theme'
Plugin 'tomasr/molokai'

" Git plugin not hosted on GitHub
" Plugin 'git://git.wincent.com/command-t.git'

" git repos on your local machine ( .e. when working on your own plugin)
" Plugin 'file:///home/gmarik/path/to/plugin'

" The sparkup vim script is in a subdirectory of this repo called vim.
" Pass the path to set the runtimepath properly.
" Plugin 'rstacruz/sparkup', {'rtpa': 'vim/'}

" Avoid a name conflict with L9
" Plugin 'user/L9', {'name': 'newL9'}



" non github repos
call vundle#end()
filetype plugin indent on     " required!
 "
 " Brief help
 " :PluginList          - list configured bundles
 " :PluginInstall(!)    - install(update) bundles
 " :PluginSearch(!) foo - search(or refresh cache first) for foo
 " :PluginClean(!)      - confirm(or auto-approve) removal of unused bundles
 "
 " see :h vundle for more details or wiki for FAQ
 " NOTE: comments after Plugin command are not allowed..

"                      _________________________
"
"                           General settings
"                      _________________________
"
"---------------------------------------------------------------------------
" => General settings
"---------------------------------------------------------------------------
set fileencodings=utf-8,chinese,ucs-bom
set encoding=utf-8
set fileencoding=utf-8
" set ambiwidth=double
set termencoding=utf-8
"vim 提示信息乱码解决方法  
"language messages zh_CN.UTF-8  
if has("win32")  
    set termencoding=chinese  
    language message zh_CN.UTF-8  
endif  

set history=100
syntax on
set cursorline
set scrolloff=5
set cmdheight=2
set report=0
set helplang=cn
"set t_Co=256
" set background=light
set bsdir=buffer
set nocompatible
set autochdir
set listchars=tab:>\ ,eol:$,extends:>,precedes:<  " Unprintable chars mapping 
set showbreak=->\ \ \ 
set wildignore=.svn,CVS,.git,.hg,*.o,*.a,*.class,*.mo,*.la,*.so,*.obj,*.swp,*.jpg,*.png,*.xpm,*.gif,.DS_Store,*.aux,*.out,*.toc
set showcmd
set shortmess=at " Avoids 'hit enter'
au BufReadPost * if line("'\"") > 0|if line("'\"") <= line("$")|exe("norm="" '\"")|else|exe="" "norm="" $"|endif|endif="" let="" mapleader="," "="" change="" the="" maplocalleader="\" "--------------------------------------------------------------------------=""> Colorscheme
"--------------------------------------------------------------------------
"colorscheme solarized
exec 'colorscheme '.["bubblegum-256-light","solarized","Tomorrow","molokai","bubblegum-256-dark","molokai"][strftime("%S")%6] 

"--------------------------------------------------------------------------
" => Status bar
"--------------------------------------------------------------------------
" Only have cursorline in current window and in normal window
autocmd WinLeave * set nocursorline
autocmd WinEnter * set cursorline
auto InsertEnter * set nocursorline
auto InsertLeave * set cursorline
set laststatus=1

"set statusline+=%{fugitive#head()}
set ruler              " bottom status bar
" set rulerformat=%45(%=\:b%n%m%r\ %Y\ %{fugitive#head()}\ %l,%c%V\ %P%)
set rulerformat=%25(%n%m%r:\ %Y\ [%l,%v]\ %p%%%)
highlight StatusLine guifg=SlateBlue guibg=Yellow
highlight StatusLineNC guifg=Gray guibg=White
if version >= 700    " change color when enter inser motion
   au InsertEnter * hi StatusLine guibg=#818D2d guifg=#FCFCFC gui=none
   au InsertLeave * hi StatusLine guibg=Yellow guifg=SlateBlue gui=none
endif

"---------------------------------------------------------------------------
" => Gui settings
"---------------------------------------------------------------------------
if has("gui_running")
    "au GUIEnter * simalt ~x  " maximun window
    set guioptions-=m        " menu bar
    set guioptions-=T        "  tools bar
    "set guioptions-=L        " left scroll bar
    set guioptions-=r        " right scroll bar
    "set guioptions-=b        " bottom scroll bar
    set showtabline=0        " tab bar
endif

"---------------------------------------------------------------------------
" => Pos and size when start
"---------------------------------------------------------------------------
" winpos 350 150
" winpos 250 200
" set lines=25
" set columns=85
winpos 200 150
set lines=30
set columns=100

"---------------------------------------------------------------------------
" => Font
"---------------------------------------------------------------------------
if has('gui_running')
    if has("win32")
      " set guifont=Lucida\ Console:h11:cANSI
        set guifont=Yahei_Mono:h12.5
    endif
endif

"---------------------------------------------------------------------------
" => Tag label
"---------------------------------------------------------------------------
set guitablabel=%m%N:%t\[%{tabpagewinnr(v:lnum)}\]
set tabline=%!MyTabLine()
function! MyTabLine()
    let s=''
    let t=tabpagenr() " The index of current page
    let i=1
    while i<=tabpagenr('$') "="" from="" the="" first="" page="" let="" buflist="tabpagebuflist(i)" winnr="tabpagewinnr(i)" s.="(i==t?'%#TabLineSel#':'%#TabLine#')" .i.'t'="" bufnr="buflist[winnr" -="" 1]="" file="bufname(bufnr)" m="" if="" getbufvar(bufnr,="" "&modified")="" endif="" .winnr.']'="" i="i+1" endwhile="">1?'%999XX':'X')
    return s
  endfunction
" Set up tab tooltips with every buffer name
set guitabtooltip=%F

" Alt+n
if has("gui_running")
     :map <silent> <c-s> :if expand("%") == ""<cr>:browse confirm w<cr>:else<cr>:confirm w<cr>:endif<cr>
     noremap <m-1> 1gt
     noremap <m-2> 2gt
     noremap <m-3> 3gt
     noremap <m-4> 4gt
     noremap <m-5> 5gt
     noremap <m-6> 6gt
     noremap <m-7> 7gt
     noremap <m-8> 8gt
     noremap <m-9> 9gt
     noremap <m-0> 10gt
     noremap <c-tab> gt
     noremap <c-f4> <esc>:bd<cr>
     noremap tx <esc>:bd<cr>
endif


"---------------------------------------------------------------------------
" => File settings
"---------------------------------------------------------------------------
set confirm                     " confirm when quit file
set autoread                    " update file when it change external
set backspace=indent,eol,start
"set shortmess=atI              " dont display tips when start
" Set directories
"set noswapfile

set backup " Set backup
" set undofile " Set undo
" Set directories
set backupdir=~/vimfiles/tmp/backup " backups
set directory=~/vimfiles/tmp/swap   " swap files
set viewdir=~/vimfiles/tmp/view   " view files
set undodir=~/vimfiles/tmp/undo   " undo files

autocmd BufWinLeave *.* silent! mkview " Make Vim save view (state)(folds,cursor,etc)
autocmd BufWinEnter *.* silent! loadview " Make Vim load view(state)(folds,cursor,etc)

"---------------------------------------------------------------------------
" => File format and Typesetting
"---------------------------------------------------------------------------
"set nowrap
set virtualedit=insert          " help virtualedit!
set formatoptions=tcrqn         " auto format
set textwidth=10000             " the max column,auto wrap when eceeding
set matchtime=5                 " highlights time for Maching braces
set showmatch                   " highlights for maching braces
set nolinebreak                 " dont break on words
set cindent                     " indent on c style
set tabstop=4
set shiftwidth=4
set expandtab
set modeline                    " autoload indent line setting
au BufNewFile,BufReadPost *.html setl shiftwidth=2 tabstop=2 softtabstop=2 expandtab
"au BufRead,BufNewFile *.css set ft=css syntax=css3
"自动插入modeline
func! AppendModeline()
 let l:modeline = printf(" vim: set ts=%d sw=%d tw=%d :",
 \ &tabstop, &shiftwidth, &textwidth)
 let l:modeline = substitute(&commentstring, "%s", l:modeline, "")
 call append(line("$"), l:modeline)
endfunc
"按\ml,自动插入modeline
nnoremap <silent> <leader>ml :call AppendModeline()<cr>
" au BufWritePre *.Q ks|:silent %s/^scriptstart\s*=\s*\zs\d\+$/\=submatch(1).line('.')/|'s

"---------------------------------------------------------------------------
" => Auto completion
"---------------------------------------------------------------------------
inoremap <c-]>             <c-x><c-]>
inoremap <c-f>             <c-x><c-f>
set complete+=]
" line                     CTRL-X CTRL-L
" keyword                  CTRL-X CTRL-N
" dict                     CTRL-X CTRL-K
" synonyms dict            CTRL-X CTRL-T
" key words                CTRL-X CTRL-I
" tags                     CTRL-X CTRL-]
" file name                CTRL-X CTRL-F
" definitions              CTRL-X CTRL-D
" vim command              CTRL-X CTRL-V
" custom                   CTRL-X CTRL-U
" spelling suggestions     CTRL-X CTRL-S 
set wildmenu               " command line auto-complete
set completeopt=longest,menuone 
set wildmode=list:longest,full              " Use powerful wildmenu
set ic                                      " ignore case
set iskeyword+=.,_,$,@,%,#,-                " about dict complete

"---------------------------------------------------------------------------
" => Search and replace
"---------------------------------------------------------------------------
set hlsearch
set incsearch      " enter '/b' you can find the word begin with b
set gdefault       " replace all the lines match
set ignorecase     " ignore case

" Open a Quickfix window for the last search.
nnoremap <silent> <leader>? :execute 'vimgrep /'.@/.'/g %'<cr>:copen<cr>

" Highlight word 
highlight InterestingWord  ctermbg=yellow guibg=yellow ctermfg=black guifg=#000000
highlight InterestingWord1 ctermbg=green  guibg=green  ctermfg=black guifg=#000000
highlight InterestingWord2 ctermbg=blue   guibg=blue   ctermfg=black guifg=#000000
highlight InterestingWord3 ctermbg=red    guibg=red    ctermfg=white guifg=#FFFFFF
nnoremap <silent> <leader>hh :execute 'match InterestingWord1 /\<<c-r><c-w>\>/'<cr>
nnoremap <silent> <leader>h1 :execute 'match InterestingWord1 /\<<c-r><c-w>\>/'<cr>
nnoremap <silent> <leader>h2 :execute '2match InterestingWord2 /\<<c-r><c-w>\>/'<cr>
nnoremap <silent> <leader>h3 :execute '3match InterestingWord3 /\<<c-r><c-w>\>/'<cr>

"-------------------------------------------------
" => Fold Related
"-------------------------------------------------

set foldenable
"set foldopen = "all"
set foldmethod=syntax
set foldcolumn=0
setlocal foldlevel=0
set foldlevelstart=99       " dont fold when open file

" Space to toggle and create folds.
nnoremap <silent><space> @=(foldlevel('.')?'za':"\<space>")<cr>
vnoremap <space> zf

" Set foldtext
function! MyFoldText()
    let line=getline(v:foldstart)
    let nucolwidth=&foldcolumn+&number*&numberwidth
    let windowwidth=winwidth(0)-nucolwidth-3
    let foldedlinecount=v:foldend-v:foldstart+1
    let onetab=strpart('          ', 0, &tabstop)
    let line=substitute(line, '\t', onetab, 'g')
    let line=strpart(line, 0, windowwidth-2-len(foldedlinecount))
    let fillcharcount=windowwidth-len(line)-len(foldedlinecount)
    return line.'…'.repeat(" ",fillcharcount).foldedlinecount.'…'.' '
endfunction
set foldtext=MyFoldText()
"--------------------------------------------------------------------------
" => Special file style
"---------------------------------------------------------------------------
au BufRead,BufNewFile {Gemfile,Rakefile,Capfile,*.rake,config.ru}     set ft=ruby
au BufRead,BufNewFile {*.md,*.mkd,*.markdown}                         set ft=markdown
au BufRead,BufNewFile {*.txt}                         set ft=txt
au BufRead,BufNewFile {*.tabl}                         set nowrap
"function! CtagsUpdata()
"    let s:pwd = $PWD
"    call system( 'cd ' . g:projecthome . ' && ctags -R' )
"    call system( 'cd ' . s:pwd ) | execute 'cd ' . s:pwd
"    execute 'set tags=' . g:default_tag
"    execute 'set tags+=' . g:projecthome . 'tags'
"     args *.c
"     argdo set ff=unix | update
"endfunction
"autocmd BufNewFile  *.Q   0r ~/.vim/template/skeleton.q "
"noremap <f12> : !ctags --langdef=vbnet --langmap=Asp:*.Q.<cr>
"noremap <c-f12> : argg tags\|argdo set fenc=utf-8\|update<cr>
set tags=./tags,tags

" Python section
" Run the current buffer in python - ie. on leader+space
autocmd FileType python set textwidth=79 " PEP-8 Friendly
" New Python file template
autocmd bufnewfile *.py call setline(1,'#!/usr/bin/env python') |
  \ call setline(2,'#coding:utf-8') |
  \ call setline(3,"#Created Time: ".strftime("%c")) |
  \ call setline(4,'#author: Cactus') |
  \ call setline(5,'') |
  \ call setline(6,'') |
  \ exe "normal G"

" Markdown
augroup ft_markdown
    autocmd!
    " Use <localleader>1/2/3/4/5/6 to add headings
    autocmd Filetype markdown nnoremap <buffer> <localleader>1 I# <esc>
    autocmd Filetype markdown nnoremap <buffer> <localleader>2 I## <esc>
    autocmd Filetype markdown nnoremap <buffer> <localleader>3 I### <esc>
    autocmd Filetype markdown nnoremap <buffer> <localleader>4 I#### <esc>
    autocmd Filetype markdown nnoremap <buffer> <localleader>5 I##### <esc>
    autocmd Filetype markdown nnoremap <buffer> <localleader>6 I###### <esc>
    " Use <localleader>b to add blockquotes in normal and visual mode
    autocmd Filetype markdown nnoremap <buffer> <localleader>b I> <esc>
    autocmd Filetype markdown vnoremap <buffer> <localleader>b :s/^/> /<cr>
    " Use <localleader>ul and <localleader>ol to add list symbols in visual mode
    autocmd Filetype markdown vnoremap <buffer> <localleader>ul :s/^/* /<cr>
    autocmd Filetype markdown vnoremap <buffer> <localleader>ol :s/^/\=(line(".")-line("'<")+1).'. '="" <cr="">
    " Use <localleader>e1/2/3 to add emphasis symbols
    autocmd Filetype markdown nnoremap <buffer> <localleader>e1 I*<esc>A*<esc>
    autocmd Filetype markdown nnoremap <buffer> <localleader>e2 I**<esc>A**<esc>
    autocmd Filetype markdown nnoremap <buffer> <localleader>e3 I***<esc>A***<esc>
    " Use <leader>P to preview markdown file in browser
    autocmd Filetype markdown nnoremap <buffer> <leader>P :MarkdownPreview<cr>
augroup END

"--------------------------------------------------------------------------
" => Key map
"---------------------------------------------------------------------------

" clear highlight after search
noremap <silent><leader>/ :nohls<cr>

" Use sane regexes
nnoremap / /\v
vnoremap / /\v
cnoremap s/ s/\v
nnoremap ? ?\v
vnoremap ? ?\v
cnoremap s? s?\v

" Keep search matches in the middle of the window
nnoremap n nzzzv
nnoremap N Nzzzv
nnoremap * *zzzv
nnoremap # #zzzv
nnoremap g* g*zzzv
nnoremap g# g#zzzv

" Visual search mappings
function! s:VSetSearch()
    let temp=@@
    normal! gvy
    let @/='\V'.substitute(escape(@@, '\'), '\n', '\\n', 'g')
    let @@=temp
endfunction
vnoremap * :<c-u>call <sid>VSetSearch()<cr>//<cr>
vnoremap # :<c-u>call <sid>VSetSearch()<cr>??<cr>

nmap wv      <c-w>v      " vertical spilt window
nmap wc      <c-w>c      " colse the current window
nmap ws      <c-w>s      " spilt window horizontally

" Begining & End of line in Normal mode
noremap H ^
noremap L g_

" Redesign moving keys in insert mode
"inoremap <c-k> <up>
"inoremap <c-j> <down>
inoremap <c-h> <left>
inoremap <c-l> <right>

" Make j and k work the way you expect
nnoremap j gj
nnoremap k gk
vnoremap j gj
vnoremap k gk

" Same when jumping around
nnoremap g; g;zz
nnoremap g, g,zz

" Navigation between windows
nnoremap <c-h> <c-w>h
nnoremap <c-j> <c-w>j
nnoremap <c-k> <c-w>k
nnoremap <c-l> <c-w>l
nnoremap <c-o> <c-w>o

" Reselect visual block after indent/outdent
vnoremap < <gv vnoremap=""> >gv

" Copy paste system clipboard
map <leader>y "+y
map <leader>p "+p
map <leader>P "+P
imap <c-v> <c-r>+
" 把||之间的运行结果输出到剪切板
" 把||之间的行数内容复制到剪切板
nmap ,cn :redir @+\|\|redir END<left><left><left><left><left><left><left><left><left><left>
nmap ,cm :silent redir @+\|for i in []\|echo getline(i)\|endfor\|redir END<left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left><left>

" Quit help easily
function! QuitWithQ()
  if &buftype == 'help'
    nnoremap <buffer> <silent> q :q<cr>
  endif
endfunction
autocmd FileType help exe QuitWithQ()

" Easy buffer navigation
noremap <leader>bp :bprevious<cr>
noremap <leader>bn :bnext<cr>

nmap gx yiw/^(def)\s+<c-r>"<cr> 

" Quick editing 
nnoremap <leader>ev :tabedit $MYVIMRC<cr>
nnoremap <silent> <localleader>rs :source $MYVIMRC<cr>
map <leader>te :tabedit <c-r>=expand("%:p:h")<cr>/

" When vimrc is edited, reload it
autocmd! BufWritePost _vimrc source $MYVIMRC

" better ESC
inoremap jk <esc>
inoremap jkl <esc>:
nmap ; :
" automatically leave insert mode after 4 seconds of inaction
au CursorHoldI * stopinsert
set ut=4000
set nu
nmap <leader>n :call NumberToggle()<cr>
function! NumberToggle()
  if(&relativenumber == 1)
    set number
  elseif(&number == 1)
    set nonumber
  else
    set relativenumber
  endif
endfunction 


" Fast saving and closing current buffer without closing windows displaying the buffer
nmap <leader>wq :w!<cr>:bdelete<cr>


"---------------------------------------------------------------------------
" => Complie and run program
"---------------------------------------------------------------------------
" 通过log文件打印错误/调试内容 
"function QfMakeConv()
"   let qflist = getqflist()
"   for i in qflist
"      let i.text = iconv(i.text, "cp936", "utf-8")
"   endfor
"   call setqflist(qflist)
"endfunction
"au QuickfixCmdPost make call QfMakeConv()

" map <f9> :call CompileRunQ()<cr>
" func! CompileRunQ()
"     set errorformat=%f，第%l行：%m
" "    let &errorformat=iconv("%f第%l行%m", "utf-8", &enc)
"     exec "cexpr[]"
"     exec "caddf E:\\Dropbox\\tmp\\tmp.txt"
"     exec "copen"
" "    call QfMakeConv()
" endfunc

func! CheckPythonSyntax()
    " w
    let mp = &makeprg
    let ef = &errorformat
    let exeFile = expand("%:t")
    setlocal makeprg=python\ -u
    set efm=%C\ %.%#,%A\ \ File\ \"%f\"\\,\ line\ %l%.%#,%Z%[%^\ ]%\\@=%m
    silent make %
    cw
    let &makeprg     = mp
    let &errorformat = ef
endfunction
au FileType python map <f5> :call CheckPythonSyntax()<cr>

"--------------------------------------------------
" => Tagbar
"--------------------------------------------------
nnoremap <leader>t :TagbarToggle<cr>
"let g:tagbar_ctags_bin='ctags'
let g:tagbar_autofocus=1
let g:tagbar_expand=1
let g:tagbar_foldlevel=2
let g:tagbar_ironchars=['?', '?']
let g:tagbar_autoshowtag=1
let g:tagbar_width = 30

"--------------------------------------------------
" => NERD_tree
"--------------------------------------------------
nnoremap <leader>d :NERDTreeTabsToggle<cr>
nnoremap <leader>f :NERDTreeFind<cr>
let NERDTreeChDirMode=2
let NERDTreeShowBookmarks=1
let NERDTreeShowHidden=1
let NERDTreeShowLineNumbers=0
let NERDTreeDirArrows=0
let g:nerdtree_tabs_open_on_gui_startup=0     "(default: 1)Open NERDTree on gvim/macvim startup
let g:nerdtree_tabs_open_on_console_startup=0     "(default: 0)Open NERDTree on console vim startup

"--------------------------------------------------
" => fugitive
"--------------------------------------------------
if executable('git')
    nnoremap <silent> <leader>gs :Gstatus<cr>
    nnoremap <silent> <leader>gd :Gdiff<cr>
    nnoremap <silent> <leader>gc :Gcommit<cr>
    nnoremap <silent> <leader>gb :Gblame<cr>
    nnoremap <silent> <leader>gl :Glog<cr>
    nnoremap <silent> <leader>gp :Git push<cr>
" Automatically remove fugitive buffers
autocmd BufReadPost fugitive://* set bufhidden=delete
endif

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" set jedi
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"let g:jedi#goto_command            = "<leader>d"
let g:jedi#goto_assignments_command = "<leader>g"
let g:jedi#goto_definitions_command = "<leader>d"
let g:jedi#documentation_command    = "K"
let g:jedi#usages_command           = "<leader>n"
let g:jedi#completions_command      = "<c-space>"
let g:jedi#rename_command           = "<leader>rname"

"--------------------------------------------------------
" => xptemplate.vim设置
"--------------------------------------------------------
"let g:xptemplate_brace_complete = 1
let g:xptemplate_brace_complete = '([''"'
" if nothing matched in xpt, try c-p 
let g:xptemplate_fallback = '<c-p>'
 
" avoid key conflict
"let g:SuperTabMappingForward = '<plug>supertabKey'

" if nothing matched in xpt, try supertab
"let g:xptemplate_fallback = '<plug>supertabKey'

" xpt uses <tab> as trigger key
let g:xptemplate_key = '<tab>'

"let g:xptemplate_always_show_pum=1 
" use <tab>/<s-tab> to navigate through popup menu  //NOT necessary. 
let g:xptemplate_pum_tab_nav = 1
let g:xptemplate_nav_cancel = '<c-c>'
" xpt triggers only when you typed whole name of a snippet.   //NOT necessary. 
let g:xptemplate_minimal_prefix = 'full'
inoremap <expr> <cr> pumvisible() ? "\<c-y><c-r>=XPTemplateStart(0)<cr>" : "\<cr>"
inoremap <expr> <c-n> pumvisible() ? '<c-n>' : '<c-n><c-r>=pumvisible() ? "\<lt>Down>" : ""<cr>'
snoremap <expr> <c-p> pumvisible() ? '<c-n>' : '<c-p><c-r>=pumvisible() ? "\<lt>Up>" : ""<cr>'

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" => Omni complete functions
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"autocmd FileType ruby,eruby set omnifunc=rubycomplete#Complete
autocmd FileType css set omnifunc=csscomplete#CompleteCSS
autocmd FileType html set omnifunc=htmlcomplete#CompleteTags
autocmd FileType python set omnifunc=pythoncomplete#Complete
autocmd FileType xml set omnifunc=xmlcomplete#CompleteTags
autocmd FileType javascript set omnifunc=javascriptcomplete#CompleteJS
"autocmd FileType vbnet set omnifunc=javascriptcomplete#CompleteJ


"---------------------------------------------------------------------------
" => surround.vim
"---------------------------------------------------------------------------
xmap <leader>sa <plug>Vsurround

"---------------------------------------------------------------------------
" => Calendar
"---------------------------------------------------------------------------
"let g:calendar_diary='/home/cactus/dev/diary'

"---------------------------------------------------------------------------
" => VimWiki
"---------------------------------------------------------------------------
let g:vimwiki_use_mouse = 1
let g:vimwiki_camel_case = 0
let g:vimwiki_hl_cb_checked = 1
let g:vimwiki_CJK_length = 1
let g:vimwiki_ext2syntax = {'.md': 'markdown',
                  \ '.mkd': 'markdown',
                  \ '.wiki': 'media'}
let g:vimwiki_valid_html_tags ='b,i,s,u,sub,sup,kbd,br,hr,div'
    let wiki_1 = {}
"    let wiki_1.index = 'VimWiki-@HM'
    let wiki_1.path = '~/vimwiki/'
    let wiki_1.path_html = '~/vimwiki/html'
    let wiki_1.template_path = '~/vimwiki/template/'
    let wiki_1.template_default = 'template1'
    let wiki_1.template_ext = '.html'
    let wiki_1.nested_syntaxes = {'python': 'python', 'c++': 'cpp'}
"    let wiki_1.syntax = 'markdown'
"    let wiki_1.ext = '.md'
    let g:vimwiki_list = [wiki_1]

"---------------------------------------------------------------------------
" => Grep
"---------------------------------------------------------------------------
nnoremap <silent> <f3> :Grep<cr>

"---------------------------------------------------------------------------
" => vim-indent-guides
"---------------------------------------------------------------------------
let g:indent_guides_start_level=2
let g:indent_guides_guide_size=1
"nmap <silent> <leader>ig <plug>IndentGuidesToggle

"---------------------------------------------------------------------------
" => vim-powerline
"---------------------------------------------------------------------------
"let g:Powerline_symbols = 'fancy'
set t_Co=256
"let g:Powerline_symbols = 'unicode'

"  vim: set ts=4 sw=4 tw=10000 :</plug></leader></silent></cr></f3></silent></plug></leader></cr></lt></c-r></c-p></c-n></c-p></expr></cr></lt></c-r></c-n></c-n></c-n></expr></cr></cr></c-r></c-y></cr></expr></c-c></s-tab></tab></tab></tab></plug></plug></c-p></leader></c-space></leader></leader></leader></leader></cr></leader></silent></cr></leader></silent></cr></leader></silent></cr></leader></silent></cr></leader></silent></cr></leader></silent></cr></leader></cr></leader></cr></leader></cr></f5></cr></f9></cr></cr></leader></cr></leader></esc></esc></cr></c-r></leader></cr></localleader></silent></cr></leader></cr></c-r></cr></leader></cr></leader></cr></silent></buffer></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></left></c-r></c-v></leader></leader></leader></gv></c-w></c-o></c-w></c-l></c-w></c-k></c-w></c-j></c-w></c-h></right></c-l></left></c-h></down></c-j></up></c-k></c-w></c-w></c-w></cr></cr></sid></c-u></cr></cr></sid></c-u></cr></leader></silent></cr></leader></buffer></leader></esc></esc></localleader></buffer></esc></esc></localleader></buffer></esc></esc></localleader></buffer></localleader></")+1).'.></localleader></buffer></cr></localleader></buffer></localleader></localleader></cr></localleader></buffer></esc></localleader></buffer></localleader></esc></localleader></buffer></esc></localleader></buffer></esc></localleader></buffer></esc></localleader></buffer></esc></localleader></buffer></esc></localleader></buffer></localleader></cr></c-f12></cr></f12></space></cr></space></space></silent></cr></c-w></c-r></leader></silent></cr></c-w></c-r></leader></silent></cr></c-w></c-r></leader></silent></cr></c-w></c-r></leader></silent></cr></cr></leader></silent></c-f></c-x></c-f></c-]></c-x></c-]></cr></leader></silent></cr></esc></cr></esc></c-f4></c-tab></m-0></m-9></m-8></m-7></m-6></m-5></m-4></m-3></m-2></m-1></cr></cr></cr></cr></cr></c-s></silent></=tabpagenr('$')></=></code></pre></p>

      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://huangming.github.io/2012-04-25-vimrc.html" data-id="cioi53ue6000k4sfu0v74xt2q" class="article-share-link">Share</a> -->
      
        
<nav id="article-nav">
  
    <a href="/2015-07-10-hello-world.html" id="article-nav-newer" class="article-nav-link-wrap">
      <!-- <strong class="article-nav-caption">Newer</strong> -->
      <div class="article-nav-title">
        
          &laquo;Hello World
        
      </div>
    </a>
  
  
    <a href="/2012-03-11-qq-kongjian-qianyi.html" id="article-nav-older" class="article-nav-link-wrap">
      <!-- <strong class="article-nav-caption">Older</strong> -->
      <div class="article-nav-title">QQ空间日记迁移声明&raquo;</div>
    </a>
  
</nav>


        

      
      
        
          <a href="http://huangming.github.io/2012-04-25-vimrc.html#disqus_thread" class="article-comment-link">Comments</a>
        
      
      
    </footer>
  </div>
</article>


<section id="comments">
  
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    </div>
  
</section>


</section>
        
      </div>
      <footer id="footer">
  
    <aside id="sidebar" class="outer">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Vim/">Vim</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/diary/">diary</a><span class="category-list-count">33</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/oracle/">oracle</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle/">oracle</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/oracle/" style="font-size: 10px;">oracle</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016-05-21-oracle-cold-backup.html">oracle-cold-backup</a>
          </li>
        
          <li>
            <a href="/2016-05-02-hexo-img-solution.html">Hexo写博客怎么优雅地插入图片</a>
          </li>
        
          <li>
            <a href="/2015-09-28-juban.html">羁绊</a>
          </li>
        
          <li>
            <a href="/2015-07-10-hello-world.html">Hello World</a>
          </li>
        
          <li>
            <a href="/2012-04-25-vimrc.html">我的vimrc</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Mingo<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/vimwiki" class="mobile-nav-link">Wiki</a>
  
</nav>
    
<script>
  var disqus_shortname = 'huangming';
  
  var disqus_url = 'http://huangming.github.io/2012-04-25-vimrc.html';
  

  var disqus_config = function () {
  this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  
  s.src = '//'+disqus_shortname + '.disqus.com/embed.js';
  
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>




<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script> -->



<script src="/js/script.js" type="text/javascript"></script>
<script type="text/javascript">
var myDate = new Date()
var m = myDate.getMinutes()
m = m % 10
document.body.style.background = '#333 url("/css/images/bgr'+m+'.jpg") top left'
document.getElementById('wrap').style.background='#333 url("/css/images/bgr'+m+'.jpg") top left' 
</script>

  </div>
  <div id="spig" class="spig">
    <div id="message">正在加载中……</div>
    <div id="mumu" class="mumu"></div>
  </div>
</body>
</html>
